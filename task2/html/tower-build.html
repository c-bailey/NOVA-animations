<html>
<body>
<script src="raphael-min.js"></script>
<div id="foo" style="background-color:#000"></div>
<script>

    var r = Raphael('foo', 1009, 633),

        originX = 0
        originY = 126

        mainUnit = 126,
        starUnit = 23.625,

        midFloorHeight = mainUnit*2/3,
        indentUnit = mainUnit/3,

        indentHeight = mainUnit-indentUnit,

        jumpHeight = -(midFloorHeight+10),

        duration = 2000,
        squareL = 'l' + mainUnit + '  ' + mainUnit + ' l' + mainUnit + '  0   l-' + mainUnit + ' -' + mainUnit + ' l-' + mainUnit + ' 0',
        squareR = 'l' + mainUnit + '  ' + mainUnit + ' l0   ' + mainUnit + '  l-' + mainUnit + ' -' + mainUnit + ' l0  -' + mainUnit + '',
        
        rectangleL = 'l' + midFloorHeight + '  ' + midFloorHeight + ' l' + mainUnit + '  0   l-' + midFloorHeight + ' -' + midFloorHeight + ' l-' + mainUnit + ' 0',
        rectangleR = 'l' + midFloorHeight + '  ' + midFloorHeight + ' l0   ' + mainUnit + '  l-' + midFloorHeight + ' -' + midFloorHeight + ' l0  -' + mainUnit + '',

        baseL = r.path('M' + originX + ' ' + originY + ' ' + squareL),
        baseR = r.path('M' + originY + ' ' + originX + ' ' + squareR),
        baseT = r.rect(0, 0, 126, 126),

        firstFloorL = r.path('M' + originX + ' ' + originY + ' ' + rectangleL),
        firstFloorR = r.path('M' + originY + ' ' + originX + ' ' + rectangleR),
        firstFloorT = r.rect(0, 0, 126, 126),

        secondFloorL = r.path('M' + originX + ' ' + originY + ' ' + rectangleL),
        secondFloorR = r.path('M' + originY + ' ' + originX + ' ' + rectangleR),
        secondFloorT = r.rect(0, 0, 126, 126),

        topFloorL = r.path('M' + originX + ' ' + originY + ' ' + rectangleL),
        topFloorR = r.path('M' + originY + ' ' + originX + ' ' + rectangleR),
        topFloorT = r.rect(0, 0, 126, 126),

        indentL = r.path('M-256.5 -256.5 l' + indentHeight + '  0 l0  0    l-' + indentHeight + ' 0  l0 0'),
        indentR = r.path('M-256.5 -256.5 l0   ' + indentHeight + ' l0  0  l0  -' + indentHeight + ' l0 0'),
        indentT = r.rect(-256.5, -256.5, indentHeight , indentHeight ),

        starCenterL = r.path('M-138.375 -114.75 l0  0 l23.625  0   l0 0 l-23.625 0'),
        starCenterR = r.path('M-114.75 -138.375 l0  0 l0   23.625  l0 0 l0  -23.625'),
        starCenterT = r.rect(-138.375, -138.375, 23.625, 23.625), //86.625
        

        set = r.set([baseR, baseL, baseT, firstFloorL, firstFloorR, firstFloorT, secondFloorR, secondFloorL, secondFloorT, topFloorR, topFloorL, topFloorT, indentR, indentT, indentL, starCenterR, starCenterT, starCenterL])

    set.transform('T311,309 s1,0.575 ,0,0r45,0,0')

    baseL.attr({ fill:'#536782', stroke:'none' })
    baseR.attr({ fill:'#8ea2bd', stroke:'none' })
    baseT.attr({ fill:'#ccc', stroke:'none' })
    firstFloorL.attr({ fill:'#536782', stroke:'none' })
    firstFloorR.attr({ fill:'#8ea2bd', stroke:'none' })
    firstFloorT.attr({ fill:'#ccc', stroke:'none' })
    secondFloorL.attr({ fill:'#536782', stroke:'none' })
    secondFloorR.attr({ fill:'#8ea2bd', stroke:'none' })
    secondFloorT.attr({ fill:'#ccc', stroke:'none' })
    topFloorL.attr({ fill:'#536782', stroke:'none' })
    topFloorR.attr({ fill:'#8ea2bd', stroke:'none' })
    topFloorT.attr({ fill:'#ccc', stroke:'none' })
    indentL.attr({ fill:'#536782', stroke:'none' })
    indentR.attr({ fill:'#8ea2bd', stroke:'none' })
    indentT.attr({ fill:'none', stroke:'none' })
    starCenterL.attr({ fill:'#536782', stroke:'none' })
    starCenterR.attr({ fill:'#8ea2bd', stroke:'none' })
    starCenterT.attr({ fill:'none', stroke:'none' })



    
    var firstGrowL = Raphael.animation({path: 'M' + (originX+jumpHeight) + ' ' + (originY+jumpHeight) + ' ' + rectangleL}, duration, "elastic");
    var firstGrowR = Raphael.animation({path: 'M' + (originY+jumpHeight) + ' ' + (originX+jumpHeight) + ' ' + rectangleR}, duration,"elastic");
    var firstGrowT = Raphael.animation({y: (originX + jumpHeight), x: (originX + jumpHeight)}, duration, "elastic");

    var secondGrowL = Raphael.animation({path: 'M' + (originX+2*jumpHeight) + ' ' + (originY+ 2*jumpHeight) + ' ' + rectangleL}, duration, "elastic");
    var secondGrowR = Raphael.animation({path: 'M' + (originY+2*jumpHeight) + ' ' + (originX+ 2*jumpHeight) + ' ' + rectangleR}, duration,"elastic");
    var secondGrowT = Raphael.animation({y: (originX + 2*jumpHeight), x: (originX + 2*jumpHeight)}, duration, "elastic");

    
    var finalGrowL = Raphael.animation({path: 'M' + (originX+3*jumpHeight - mainUnit/3) + ' ' + (originY+ 3*jumpHeight - mainUnit/3) + ' ' + squareL}, duration, "elastic");
    var finalGrowR = Raphael.animation({path: 'M' + (originY+3*jumpHeight - mainUnit/3) + ' ' + (originX+ 3*jumpHeight - mainUnit/3) + ' ' + squareR}, duration, "elastic");
    var finalGrowT = Raphael.animation({y: (originX + 3*jumpHeight - mainUnit/3), x: (originX + 3*jumpHeight - mainUnit/3)}, duration, "elastic");

    
    var finalIndentL = Raphael.animation({path: 'M-256.5 -256.5 l' + indentHeight + '  0 l' + indentHeight + '  ' + indentHeight + '    l-' + indentHeight + ' 0  l-' + indentHeight + ' -' + indentHeight + ' '}, duration/3);
    var finalIndentR = Raphael.animation({path: 'M-256.5 -256.5 l0   ' + indentHeight + ' l' + indentHeight + '  ' + indentHeight + '  l0  -' + indentHeight + ' l-' + indentHeight + ' -' + indentHeight + ' '}, duration/3);
    var finalIndentT = Raphael.animation({x:-162, y:-162}, duration/3);

    
    var starUpL = Raphael.animation({path: 'M-209.25 -185.625 l70.875  70.875 l23.625  0   l-70.875 -70.875 l-23.625 0'}, duration/3);
    var starUpR = Raphael.animation({path: 'M-185.625 -209.25 l70.875  70.875 l0   23.625  l-70.875 -70.875 l0  -23.625'}, duration/3);
    var starUpT = Raphael.animation({x:-209.25, y:-209.25}, duration/3);


    var firstLevelUp = function() {
        firstFloorR.animate(firstGrowR);
        firstFloorL.animate(firstGrowL);
        firstFloorT.animate(firstGrowT);

        secondFloorR.animate(firstGrowR);
        secondFloorL.animate(firstGrowL);
        secondFloorT.animate(firstGrowT);

        topFloorR.animate(firstGrowR);
        topFloorL.animate(firstGrowL);
        topFloorT.animate(firstGrowT);
    }
    
    var secondLevelUp = function() {
        secondFloorR.animate(secondGrowR);
        secondFloorL.animate(secondGrowL);
        secondFloorT.animate(secondGrowT);

        topFloorR.animate(secondGrowR);
        topFloorL.animate(secondGrowL);
        topFloorT.animate(secondGrowT);
    }
    
    var finalLevelUp = function() {
        topFloorR.animate(finalGrowR);
        topFloorL.animate(finalGrowL);
        topFloorT.animate(finalGrowT); 
    }

    var indent = function() {
        indentT.attr({ fill:'#ccc', stroke:'none' })
        indentR.animate(finalIndentR);
        indentL.animate(finalIndentL);
        indentT.animate(finalIndentT);
    }

    var star=function() {
        starCenterT.attr({ fill:'#ccc', stroke:'none' })
        starCenterR.animate(starUpR);
        starCenterL.animate(starUpL);
        starCenterT.animate(starUpT);
    }
        

</script>
</body>
</html>
