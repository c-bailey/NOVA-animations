<html>
<body>
<script src="raphael-min.js"></script>
<div id="foo" style="background-color:#000"></div>
<script>

    var r = Raphael('foo', 1009, 633),

        mainUnit = 126,
        indentUnit = 31.5,
        starUnit = 23.625,

        duration = 2000,
        squareL = 'l126  126 l126  0   l-126 -126 l-126 0',
        squareR = 'l126  126 l0   126  l-126 -126 l0  -126',
        
        rectangleL = 'l63  63 l126  0   l-63 -63 l-126 0',
        rectangleR = 'l63  63 l0   126  l-63 -63 l0  -126',

        baseL = r.path('M0 126 ' + squareL),
        baseR = r.path('M126 0 ' + squareR),
        baseT = r.rect(0, 0, 126, 126),

        firstFloorL = r.path('M0 126 ' + rectangleL),
        firstFloorR = r.path('M126 0 ' + rectangleR),
        firstFloorT = r.rect(0, 0, 126, 126),

        secondFloorL = r.path('M0 126 ' + rectangleL),
        secondFloorR = r.path('M126 0 ' + rectangleR),
        secondFloorT = r.rect(0, 0, 126, 126),

        topFloorL = r.path('M0 126 ' + rectangleL),
        topFloorR = r.path('M126 0 ' + rectangleR),
        topFloorT = r.rect(0, 0, 126, 126),

        indentL = r.path('M-256.5 -256.5 l94.5  0 l0  0    l-94.5 0  l0 0'),
        indentR = r.path('M-256.5 -256.5 l0   94.5 l0  0  l0  -94.5 l0 0'),
        indentT = r.rect(-256.5, -256.5, 94.5, 94.5),

        starCenterL = r.path('M-138.375 -114.75 l0  0 l23.625  0   l0 0 l-23.625 0'),
        starCenterR = r.path('M-114.75 -138.375 l0  0 l0   23.625  l0 0 l0  -23.625'),
        starCenterT = r.rect(-138.375, -138.375, 23.625, 23.625), //86.625
        

        set = r.set([baseR, baseL, baseT, firstFloorL, firstFloorR, firstFloorT, secondFloorR, secondFloorL, secondFloorT, topFloorR, topFloorL, topFloorT, indentR, indentT, indentL, starCenterR, starCenterT, starCenterL])

    set.transform('T311,309 s1,0.575 ,0,0r45,0,0')

    baseL.attr({ fill:'#536782', stroke:'none' })
    baseR.attr({ fill:'#8ea2bd', stroke:'none' })
    baseT.attr({ fill:'#ccc', stroke:'none' })
    firstFloorL.attr({ fill:'#536782', stroke:'none' })
    firstFloorR.attr({ fill:'#8ea2bd', stroke:'none' })
    firstFloorT.attr({ fill:'#ccc', stroke:'none' })
    secondFloorL.attr({ fill:'#536782', stroke:'none' })
    secondFloorR.attr({ fill:'#8ea2bd', stroke:'none' })
    secondFloorT.attr({ fill:'#ccc', stroke:'none' })
    topFloorL.attr({ fill:'#536782', stroke:'none' })
    topFloorR.attr({ fill:'#8ea2bd', stroke:'none' })
    topFloorT.attr({ fill:'#ccc', stroke:'none' })
    indentL.attr({ fill:'#536782', stroke:'none' })
    indentR.attr({ fill:'#8ea2bd', stroke:'none' })
    indentT.attr({ fill:'none', stroke:'none' })
    starCenterL.attr({ fill:'#536782', stroke:'none' })
    starCenterR.attr({ fill:'#8ea2bd', stroke:'none' })
    starCenterT.attr({ fill:'none', stroke:'none' })



    var firstGrowR = Raphael.animation({path: 'M51 -75 ' + rectangleR}, duration,"elastic");
    var firstGrowL = Raphael.animation({path: 'M-75 51 ' + rectangleL}, duration, "elastic");
    var firstGrowT = Raphael.animation({y: -75, x: -75}, duration, "elastic");

    var secondGrowR = Raphael.animation({path: 'M-24 -150 ' + rectangleR}, duration, "elastic");
    var secondGrowL = Raphael.animation({path: 'M-150 -24 ' + rectangleL}, duration, "elastic");
    var secondGrowT = Raphael.animation({y: -150, x: -150}, duration, "elastic");

    var finalGrowR = Raphael.animation({path: 'M-162 -288 ' + squareR}, duration, "elastic");
    var finalGrowL = Raphael.animation({path: 'M-288 -162 ' + squareL}, duration, "elastic");
    var finalGrowT = Raphael.animation({y: -288, x: -288}, duration, "elastic");

    var finalIndentR = Raphael.animation({path: 'M-256.5 -256.5 l0   94.5 l94.5  94.5  l0  -94.5 l-94.5 -94.5 '}, duration/3);
    var finalIndentL = Raphael.animation({path: 'M-256.5 -256.5 l94.5  0 l94.5  94.5    l-94.5 0  l-94.5 -94.5 '}, duration/3);
    var finalIndentT = Raphael.animation({x:-162, y:-162}, duration/3);

    var starUpR = Raphael.animation({path: 'M-185.625 -209.25 l70.875  70.875 l0   23.625  l-70.875 -70.875 l0  -23.625'}, duration/3);
    var starUpL = Raphael.animation({path: 'M-209.25 -185.625 l70.875  70.875 l23.625  0   l-70.875 -70.875 l-23.625 0'}, duration/3);
    var starUpT = Raphael.animation({x:-209.25, y:-209.25}, duration/3);


    var firstLevelUp = function() {
        firstFloorR.animate(firstGrowR);
        firstFloorL.animate(firstGrowL);
        firstFloorT.animate(firstGrowT);

        secondFloorR.animate(firstGrowR);
        secondFloorL.animate(firstGrowL);
        secondFloorT.animate(firstGrowT);

        topFloorR.animate(firstGrowR);
        topFloorL.animate(firstGrowL);
        topFloorT.animate(firstGrowT);
    }
    
    var secondLevelUp = function() {
        secondFloorR.animate(secondGrowR);
        secondFloorL.animate(secondGrowL);
        secondFloorT.animate(secondGrowT);

        topFloorR.animate(secondGrowR);
        topFloorL.animate(secondGrowL);
        topFloorT.animate(secondGrowT);
    }
    
    var finalLevelUp = function() {
        topFloorR.animate(finalGrowR);
        topFloorL.animate(finalGrowL);
        topFloorT.animate(finalGrowT); 
    }

    var indent = function() {
        indentT.attr({ fill:'#ccc', stroke:'none' })
        indentR.animate(finalIndentR);
        indentL.animate(finalIndentL);
        indentT.animate(finalIndentT);
    }

    var star=function() {
        starCenterT.attr({ fill:'#ccc', stroke:'none' })
        starCenterR.animate(starUpR);
        starCenterL.animate(starUpL);
        starCenterT.animate(starUpT);
    }
        

</script>
</body>
</html>
